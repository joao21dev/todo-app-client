{"ast":null,"code":"import _toConsumableArray from\"/home/joao/Documents/Code/todo-app/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/joao/Documents/Code/todo-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/joao/Documents/Code/todo-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/joao/Documents/Code/todo-app/client/node_modules/@babel/runtime/regenerator/index.js\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API_BASE=\"http://localhost:3001\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),popupActive=_useState4[0],setPopupActive=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newTodo=_useState6[0],setNewTodo=_useState6[1];useEffect(function(){GetTodos();console.log(todos);},[]);var GetTodos=function GetTodos(){fetch(API_BASE+\"/todos\").then(function(res){return res.json();}).then(function(data){return setTodos(data);}).catch(function(err){return console.error(\"Error: \",err);});};var completeTodo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(API_BASE+\"/todo/complete/\"+id).then(function(res){return res.json();});case 2:data=_context.sent;setTodos(function(todos){return todos.map(function(todo){if(todo._id===data._id){todo.complete=data.complete;}return todo;});});case 4:case\"end\":return _context.stop();}}},_callee);}));return function completeTodo(_x){return _ref.apply(this,arguments);};}();var deleteTodo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(API_BASE+\"/todo/delete/\"+id,{method:\"DELETE\"}).then(function(res){return res.json();});case 2:data=_context2.sent;setTodos(function(todos){return todos.filter(function(todo){return todo._id!==data._id;});});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteTodo(_x2){return _ref2.apply(this,arguments);};}();var addTodo=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(API_BASE+\"/todo/new\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text:newTodo})}).then(function(res){return res.json();});case 2:data=_context3.sent;setTodos([].concat(_toConsumableArray(todos),[data]));setPopupActive(false);setNewTodo(\"\");case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function addTodo(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Ol\\xE1, Jo\\xE3o\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Suas Tarefas\"}),/*#__PURE__*/_jsx(\"div\",{className:\"todos\",children:todos.map(function(todo){return/*#__PURE__*/_jsxs(\"div\",{className:\"todo \"+(todo.complete?\"is-complete\":\"\"),onClick:function onClick(){return completeTodo(todo._id);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"checkbox\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:todo.text}),/*#__PURE__*/_jsx(\"div\",{className:\"delete-todo\",onClick:function onClick(){return deleteTodo(todo._id);},children:\"x\"})]},todo._id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"addPopup\",onClick:function onClick(){return setPopupActive(true);},children:\"+\"}),popupActive?/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"closePopup\",onClick:function onClick(){return setPopupActive(false);},children:\"x\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Nova Tarefa\"}),/*#__PURE__*/_jsx(\"input\",{className:\"add-todo-input\",onChange:function onChange(e){return setNewTodo(e.target.value);},value:newTodo}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",onClick:addTodo,children:\"Adicionar\"})]})]}):\"\"]});}export default App;","map":{"version":3,"sources":["/home/joao/Documents/Code/todo-app/client/src/App.js"],"names":["useEffect","useState","API_BASE","App","todos","setTodos","popupActive","setPopupActive","newTodo","setNewTodo","GetTodos","console","log","fetch","then","res","json","data","catch","err","error","completeTodo","id","map","todo","_id","complete","deleteTodo","method","filter","addTodo","headers","body","JSON","stringify","text","e","target","value"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\n\nconst API_BASE = \"http://localhost:3001\";\n\nfunction App() {\n  const [todos, setTodos] = useState([]);\n  const [popupActive, setPopupActive] = useState(false);\n  const [newTodo, setNewTodo] = useState(\"\");\n\n  useEffect(() => {\n    GetTodos();\n\n    console.log(todos);\n  }, []);\n\n  const GetTodos = () => {\n    fetch(API_BASE + \"/todos\")\n      .then((res) => res.json())\n      .then((data) => setTodos(data))\n      .catch((err) => console.error(\"Error: \", err));\n  };\n\n  const completeTodo = async (id) => {\n    const data = await fetch(API_BASE + \"/todo/complete/\" + id).then((res) =>\n      res.json()\n    );\n    setTodos((todos) =>\n      todos.map((todo) => {\n        if (todo._id === data._id) {\n          todo.complete = data.complete;\n        }\n        return todo;\n      })\n    );\n  };\n\n  const deleteTodo = async (id) => {\n    const data = await fetch(API_BASE + \"/todo/delete/\" + id, {\n      method: \"DELETE\",\n    }).then((res) => res.json());\n\n    setTodos((todos) => todos.filter((todo) => todo._id !== data._id));\n  };\n\n  const addTodo = async () => {\n    const data = await fetch(API_BASE + \"/todo/new\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        text: newTodo,\n      }),\n    }).then((res) => res.json());\n\n    setTodos([...todos, data]);\n\n    setPopupActive(false);\n    setNewTodo(\"\");\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>Olá, João</h1>\n      <h4>Suas Tarefas</h4>\n\n      <div className=\"todos\">\n        {todos.map((todo) => (\n          <div\n            className={\"todo \" + (todo.complete ? \"is-complete\" : \"\")}\n            key={todo._id}\n            onClick={() => completeTodo(todo._id)}\n          >\n            <div className=\"checkbox\"></div>\n\n            <div className=\"text\">{todo.text}</div>\n\n            <div className=\"delete-todo\" onClick={() => deleteTodo(todo._id)}>\n              x\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"addPopup\" onClick={() => setPopupActive(true)}>\n        +\n      </div>\n\n      {popupActive ? (\n        <div className=\"popup\">\n          <div className=\"closePopup\" onClick={() => setPopupActive(false)}>\n            x\n          </div>\n          <div className=\"content\">\n            <h3>Nova Tarefa</h3>\n            <input\n              className=\"add-todo-input\"\n              onChange={(e) => setNewTodo(e.target.value)}\n              value={newTodo}\n            ></input>\n            <div className=\"button\" onClick={addTodo}>\n              Adicionar\n            </div>\n          </div>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}